!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.ReactModel=t()}(this,function(){"use strict";var e=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},t=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},r=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{!r&&c.return&&c.return()}finally{if(o)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=Symbol("events"),i=function(){function n(){e(this,n),Reflect.defineProperty(this,o,{value:new Set,writable:!1,enumerable:!1,configurable:!1})}return t(n,[{key:"on",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e&&t&&this[o].add({type:e,listener:t,context:n})}},{key:"off",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e||t||r||this[o].clear(),this[o].forEach(function(i){e&&e!==i.type||t&&t!==i.listener||r&&r!==i.context||n[o].delete(i)})}},{key:"emit",value:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this[o].forEach(function(t){e===t.type&&Reflect.apply(t.listener,t.context,n)}),this.emit.apply(this,["*",e].concat(n))}}]),n}();return function(o){function a(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e(this,a);var r=n(this,(a.__proto__||Object.getPrototypeOf(a)).call(this));return r.attrs=new Map(Object.entries(t)),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,i),t(a,[{key:"set",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.changed=new Map,Object.entries(t).forEach(function(t){var n=r(t,2),o=n[0],i=n[1];Object.is(i,e.attrs.get(o))||(e.changed.set(o,i),e.attrs.set(o,i),e.emit("change:"+o,i))}),this.changed.size&&this.emit("change",this.changed)}},{key:"get",value:function(e){return this.attrs.get(e)}}]),a}()});
